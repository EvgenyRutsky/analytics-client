# analytics-client
Приложение, написанное на Go, используется для нагрузки [analytics-service](https://github.com/EvgenyRutsky/analytics-service) входящими ивентами.

## Запуск
- Для того, чтобы указать количество запросов, которые будут отправлены на сервис, нужно указать атрибут `-reqnum`. _Значение по умолчанию - `1`._
- Чтобы указать порт, на который необходимо отправлять запросы (порт `analytics-service`), используется атрибут `-port`. _Значение по умолчанию - `9090`._
- `-help` отобразит информацию о поддерживаемых атрибутах.

Чтобы использовать значения атрибутов по умолчанию, приложение запускается без атрибутов.

Команда запуска приложения, используя исходный код, может выглядеть следующим образом: `go run main.go -reqnum=3000 -port=8080`.

## Как это работает?
Приложение отправляет POST запросы на указанный порт. Тело каждого запроса содержит `value`, которое генерируется в интервале [0, 100) и выглядит следующим образом: `{"value":42}`.
Для обеспечения случайно-равномерной нагрузки в ~50 RPS, каждый следующий запрос отправляется со случайной задерждкой в интервале от 10мс до 30мс.

## Что на выходе?
В ходе работы сервис выводит коды ответов на выполненные запросы. Для `analytics-service` это:
    - **201** - created, успешно выполненный запрос;
    - **500** - internal server error, ошибка на стороне `analytics-service`.

Перед выходом приложение выводит время, за которое были выполнены запросы.
